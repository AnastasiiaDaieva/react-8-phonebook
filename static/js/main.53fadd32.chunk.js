(this["webpackJsonpreact-8-phonebook"]=this["webpackJsonpreact-8-phonebook"]||[]).push([[3],{12:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return d}));var c=n(13),r=n.n(c),a=n(20),o=n(15),s=n.n(o),u=n(3);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var i={set:function(e){s.a.defaults.headers.common.Authorization="Bearer ".concat(e)},remove:function(){s.a.defaults.headers.common.Authorization=""}},l=Object(u.c)("auth/signup",function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/users/signup",t);case 3:return n=e.sent,c=n.data,i.set(c.token),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),j=Object(u.c)("auth/login",function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/users/login",t);case 3:return n=e.sent,c=n.data,i.set(c.token),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),b=Object(u.c)("auth/logout",Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/users/logout");case 3:i.remove(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),d=Object(u.c)("auth/fetch",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),console.log(c),a=c.auth.token,null!==i){e.next=5;break}return e.abrupt("return",n.rejectWithValue());case 5:return i.set(a),e.prev=6,e.next=9,s.a.get("/users/current");case 9:return o=e.sent,u=o.data,e.abrupt("return",u);case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}())},21:function(e,t,n){e.exports={AppBar:"AppBar_AppBar__24GCp",AppBar__item:"AppBar_AppBar__item__1InR9"}},26:function(e,t,n){e.exports={AuthNav:"AuthNav_AuthNav__1i0e3"}},29:function(e,t,n){e.exports={GenNav:"GenNav_GenNav__2itc5"}},30:function(e,t,n){e.exports={UserMenu__user:"UserMenu_UserMenu__user__28Cxp",UserMenu__photo:"UserMenu_UserMenu__photo__3rXh9"}},31:function(e,t,n){e.exports={Logo:"Logo_Logo__iPoQw",Logo__icon:"Logo_Logo__icon__wFLWg"}},51:function(e,t,n){},52:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"j",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return j})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return d}));var c=n(3),r=Object(c.b)("contacts/fetchContactsRequest"),a=Object(c.b)("contacts/fetchContactsSuccess"),o=Object(c.b)("contacts/fetchContactsError"),s=Object(c.b)("contacts/addContactRequest"),u=Object(c.b)("contacts/addContactSuccess"),i=Object(c.b)("contacts/addContactError"),l=Object(c.b)("contacts/deleteContactRequest"),j=Object(c.b)("contacts/deleteContactSuccess"),b=Object(c.b)("contacts/deleteContactError"),d=Object(c.b)("contacts/changeFilter")},86:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(24),o=n.n(a),s=(n(51),n(40)),u=n(41),i=(n(52),n(43)),l=n.n(i),j=n(2),b=n(21),d=n.n(b),f=n(11),O=n(29),p=n.n(O),h=n(1),g=function(e){return{color:e.isActive?"#3e84be":"#fff",textDecoration:"none"}};var x=function(e){var t=e.className;return Object(h.jsxs)("nav",{className:t,children:[Object(h.jsx)(f.b,{style:g,className:p.a.GenNav,to:"/*",children:"Home"}),Object(h.jsx)(f.b,{style:g,className:p.a.GenNav,to:"/mycontacts",children:"My Contacts"})]})},v=n(26),m=n.n(v);var _=function(e){var t=e.className;return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"".concat(t," ").concat(m.a.AuthNav),children:[Object(h.jsx)(f.b,{style:g,className:m.a.AuthNav,to:"/signup",children:"Sign up"}),Object(h.jsx)(f.b,{style:g,className:m.a.AuthNav,to:"/login",children:"Login"})]})})},N=n(30),k=n.n(N),y=n(12),A=n(6),L=function(e){return e.auth.isLoggedIn},w=function(e){return e.auth.user.email},C=function(e){return e.auth.isFetchingUser},U=function(e){return e.auth.token},B=n.p+"static/media/default-user-pic.56dbb7a8.png";var M=function(e){var t=e.className,n=Object(A.c)(),c=Object(A.d)(w);return console.log(c),Object(h.jsxs)("div",{className:t,children:[Object(h.jsxs)("span",{className:k.a.UserMenu__user,children:[" Hello, ",c]}),Object(h.jsx)("img",{className:k.a.UserMenu__photo,alt:"default avatar",src:B}),Object(h.jsx)("button",{onClick:function(){return n(Object(y.c)())},children:"Logout"})]})},F=n(46),z=n(31),I=n.n(z);var S=function(){return Object(h.jsx)("div",{className:I.a.Logo,children:Object(h.jsxs)(f.b,{style:{textDecoration:"none",color:"#fff"},to:"/*",children:[Object(h.jsx)(F.a,{className:I.a.Logo__icon}),Object(h.jsx)("span",{children:"MyPhonebook"})]})})};var G=function(){var e=Object(A.d)(L),t=Object(A.d)(w);return Object(h.jsxs)("header",{className:d.a.AppBar,children:[Object(h.jsx)(S,{}),Object(h.jsx)(x,{className:d.a.AppBar__item}),e&&void 0!==t?Object(h.jsx)(M,{className:d.a.AppBar__item}):Object(h.jsx)(_,{className:d.a.AppBar__item})]})};function R(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/*":n;return Object(A.d)(L)?t:Object(h.jsx)(j.a,{to:c})}function T(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/*":n;return Object(A.d)(L)?Object(h.jsx)(j.a,{to:c}):t}var E,q=n(28),D=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,99))})),H=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,100))})),J=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,102))})),P=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,101))})),W=Object(q.css)(E||(E=Object(u.a)(["\n  display: block;\n  margin: auto;\n"])));var Q,V,X,K=function(){var e=Object(A.c)(),t=Object(A.d)(C),n=Object(A.d)(U);return console.log(n),Object(c.useEffect)((function(){null!==n&&e(Object(y.a)())}),[e]),Object(h.jsx)(h.Fragment,{children:!t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(G,{}),Object(h.jsx)(c.Suspense,{fallback:Object(h.jsx)(l.a,{css:W,size:200}),children:Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{path:"/*",element:Object(h.jsx)(D,{})}),Object(h.jsx)(j.b,{path:"/mycontacts",element:Object(h.jsx)(R,{redirectTo:"/login",children:Object(h.jsx)(J,{})})}),Object(h.jsx)(j.b,{path:"/signup",element:Object(h.jsx)(T,{redirectTo:"/*",children:Object(h.jsx)(P,{})})}),Object(h.jsx)(j.b,{path:"/login",element:Object(h.jsx)(T,{redirectTo:"/*",children:Object(h.jsx)(H,{})})})]})})]})})},Y=n(25),Z=n(3),$=n(4),ee=n(7),te=n(8),ne=Object(Z.d)([],(Q={},Object($.a)(Q,te.j,(function(e,t){return t.payload})),Object($.a)(Q,te.c,(function(e,t){var n=t.payload;return[].concat(Object(Y.a)(e),[n])})),Object($.a)(Q,te.g,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Q)),ce=Object(Z.d)("",Object($.a)({},te.d,(function(e,t){return t.payload}))),re=Object(Z.d)(!1,(V={},Object($.a)(V,te.b,(function(){return!0})),Object($.a)(V,te.c,(function(){return!1})),Object($.a)(V,te.a,(function(){return!1})),Object($.a)(V,te.f,(function(){return!0})),Object($.a)(V,te.g,(function(){return!1})),Object($.a)(V,te.e,(function(){return!1})),Object($.a)(V,te.i,(function(){return!0})),Object($.a)(V,te.j,(function(){return!1})),Object($.a)(V,te.h,(function(){return!1})),V)),ae=Object(Z.d)(null,{}),oe=Object(ee.b)({items:ne,filter:ce,loading:re,error:ae}),se=n(14),ue=n(44),ie=n.n(ue),le=n(45),je=Object(Z.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingUser:!1},extraReducers:(X={},Object($.a)(X,y.d.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object($.a)(X,y.b.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object($.a)(X,y.c.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object($.a)(X,y.a.pending,(function(e){e.isFetchingUser=!0})),Object($.a)(X,y.a.fulfilled,(function(e,t){e.user=Object(le.a)({},t.payload),e.isLoggedIn=!0,e.isFetchingUser=!1})),Object($.a)(X,y.a.rejected,(function(e){e.isFetchingUser=!1})),X)}).reducer,be=Object(Y.a)(Object(Z.f)({serializableCheck:{ignoredActions:[se.a,se.f,se.b,se.c,se.d,se.e]}})),de={key:"auth",storage:ie.a,whitelist:["token"]},fe=Object(Z.a)({reducer:{auth:Object(se.g)(de,je),contacts:oe},middleware:be,devTools:!1}),Oe={store:fe,persistor:Object(se.h)(fe)};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(A.a,{store:Oe.store,children:Object(h.jsx)(s.a,{loading:"downloading data...",persistor:Oe.persistor,children:Object(h.jsx)(f.a,{children:Object(h.jsx)(K,{})})})})}),document.getElementById("root"))}},[[86,4,6]]]);
//# sourceMappingURL=main.53fadd32.chunk.js.map