(this["webpackJsonpreact-8-phonebook"]=this["webpackJsonpreact-8-phonebook"]||[]).push([[3],{11:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return d}));var c=n(13),r=n.n(c),a=n(20),s=n(15),u=n.n(s),o=n(3);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var i={set:function(e){u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},remove:function(){u.a.defaults.headers.common.Authorization=""}},l=Object(o.c)("auth/signup",function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/users/signup",t);case 3:return n=e.sent,c=n.data,i.set(c.token),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),b=Object(o.c)("auth/login",function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/users/login",t);case 3:return n=e.sent,c=n.data,i.set(c.token),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),j=Object(o.c)("auth/logout",Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/users/logout");case 3:i.remove(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),d=Object(o.c)("auth/fetch",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),a=c.auth.token,null!==i){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return i.set(a),e.prev=5,e.next=8,u.a.get("/users/current");case 8:return s=e.sent,o=s.data,e.abrupt("return",o);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},21:function(e,t,n){e.exports={AppBar:"AppBar_AppBar__24GCp",AppBar__item:"AppBar_AppBar__item__1InR9"}},26:function(e,t,n){e.exports={AuthNav:"AuthNav_AuthNav__1i0e3"}},29:function(e,t,n){e.exports={GenNav:"GenNav_GenNav__2itc5"}},30:function(e,t,n){e.exports={UserMenu__user:"UserMenu_UserMenu__user__28Cxp",UserMenu__photo:"UserMenu_UserMenu__photo__3rXh9"}},49:function(e,t,n){},50:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"j",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return d}));var c=n(3),r=Object(c.b)("contacts/fetchContactsRequest"),a=Object(c.b)("contacts/fetchContactsSuccess"),s=Object(c.b)("contacts/fetchContactsError"),u=Object(c.b)("contacts/addContactRequest"),o=Object(c.b)("contacts/addContactSuccess"),i=Object(c.b)("contacts/addContactError"),l=Object(c.b)("contacts/deleteContactRequest"),b=Object(c.b)("contacts/deleteContactSuccess"),j=Object(c.b)("contacts/deleteContactError"),d=Object(c.b)("contacts/changeFilter")},84:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(24),s=n.n(a),u=(n(49),n(39)),o=n(40),i=(n(50),n(42)),l=n.n(i),b=n(2),j=n(21),d=n.n(j),f=n(12),O=n(29),p=n.n(O),h=n(1),v=function(e){return{color:e.isActive?"#3e84be":"#fff",textDecoration:"none"}};var g=function(e){var t=e.className;return Object(h.jsxs)("nav",{className:t,children:[Object(h.jsx)(f.b,{style:v,className:p.a.GenNav,to:"/*",children:"Home"}),Object(h.jsx)(f.b,{style:v,className:p.a.GenNav,to:"/mycontacts",children:"My Contacts"})]})},x=n(26),m=n.n(x);var _=function(e){var t=e.className;return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"".concat(t," ").concat(m.a.AuthNav),children:[Object(h.jsx)(f.b,{style:v,className:m.a.AuthNav,to:"/signup",children:"Sign up"}),Object(h.jsx)(f.b,{style:v,className:m.a.AuthNav,to:"/login",children:"Login"})]})})},N=n(30),k=n.n(N),y=n(11),A=n(7),C=function(e){return e.auth.isLoggedIn},U=function(e){return e.auth.user.email},w=function(e){return e.auth.isFetchingUser},B=n.p+"static/media/default-user-pic.56dbb7a8.png";var M=function(e){var t=e.className,n=Object(A.c)(),c=Object(A.d)(U);return Object(h.jsxs)("div",{className:t,children:[Object(h.jsxs)("span",{className:k.a.UserMenu__user,children:[" Hello, ",c]}),Object(h.jsx)("img",{className:k.a.UserMenu__photo,alt:"default avatar",src:B}),Object(h.jsx)("button",{onClick:function(){return n(Object(y.c)())},children:"Logout"})]})};var F=function(){var e=Object(A.d)(C);return Object(h.jsxs)("header",{className:d.a.AppBar,children:[Object(h.jsx)(g,{className:d.a.AppBar__item}),e?Object(h.jsx)(M,{className:d.a.AppBar__item}):Object(h.jsx)(_,{className:d.a.AppBar__item})]})};function L(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/*":n;return Object(A.d)(C)?t:Object(h.jsx)(b.a,{to:c})}function z(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/*":n;return Object(A.d)(C)?Object(h.jsx)(b.a,{to:c}):t}var I,S=n(28),G=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,97))})),R=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,98))})),T=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,100))})),E=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,99))})),q=Object(S.css)(I||(I=Object(o.a)(["\n  display: block;\n  margin: auto;\n"])));var H,J,D,V=function(){var e=Object(A.c)(),t=Object(A.d)(w);return console.log(t),Object(c.useEffect)((function(){e(Object(y.a)())}),[e]),Object(h.jsx)(h.Fragment,{children:!t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(F,{}),Object(h.jsx)(c.Suspense,{fallback:Object(h.jsx)(l.a,{css:q,size:200}),children:Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{path:"/*",element:Object(h.jsx)(G,{})}),Object(h.jsx)(b.b,{path:"/mycontacts",element:Object(h.jsx)(L,{redirectTo:"/login",children:Object(h.jsx)(T,{})})}),Object(h.jsx)(b.b,{path:"/signup",element:Object(h.jsx)(z,{redirectTo:"/*",children:Object(h.jsx)(E,{})})}),Object(h.jsx)(b.b,{path:"/login",element:Object(h.jsx)(z,{redirectTo:"/*",children:Object(h.jsx)(R,{})})})]})})]})})},W=n(25),X=n(3),K=n(4),P=n(6),Q=n(8),Y=Object(X.d)([],(H={},Object(K.a)(H,Q.j,(function(e,t){return t.payload})),Object(K.a)(H,Q.c,(function(e,t){var n=t.payload;return[].concat(Object(W.a)(e),[n])})),Object(K.a)(H,Q.g,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),H)),Z=Object(X.d)("",Object(K.a)({},Q.d,(function(e,t){return t.payload}))),$=Object(X.d)(!1,(J={},Object(K.a)(J,Q.b,(function(){return!0})),Object(K.a)(J,Q.c,(function(){return!1})),Object(K.a)(J,Q.a,(function(){return!1})),Object(K.a)(J,Q.f,(function(){return!0})),Object(K.a)(J,Q.g,(function(){return!1})),Object(K.a)(J,Q.e,(function(){return!1})),Object(K.a)(J,Q.i,(function(){return!0})),Object(K.a)(J,Q.j,(function(){return!1})),Object(K.a)(J,Q.h,(function(){return!1})),J)),ee=Object(X.d)(null,{}),te=Object(P.b)({items:Y,filter:Z,loading:$,error:ee}),ne=n(14),ce=n(43),re=n.n(ce),ae=n(44),se=Object(X.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingUser:!1},extraReducers:(D={},Object(K.a)(D,y.d.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(K.a)(D,y.b.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(K.a)(D,y.c.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(K.a)(D,y.a.pending,(function(e){e.isFetchingUser=!0})),Object(K.a)(D,y.a.fulfilled,(function(e,t){e.user=Object(ae.a)({},t.payload),e.isLoggedIn=!0,e.isFetchingUser=!1})),Object(K.a)(D,y.a.rejected,(function(e){e.isFetchingUser=!1})),D)}).reducer,ue=Object(W.a)(Object(X.f)({serializableCheck:{ignoredActions:[ne.a,ne.f,ne.b,ne.c,ne.d,ne.e]}})),oe={key:"auth",storage:re.a,whitelist:["token"]},ie=Object(X.a)({reducer:{auth:Object(ne.g)(oe,se),contacts:te},middleware:ue,devTools:!1}),le={store:ie,persistor:Object(ne.h)(ie)};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(A.a,{store:le.store,children:Object(h.jsx)(u.a,{loading:"downloading data...",persistor:le.persistor,children:Object(h.jsx)(f.a,{children:Object(h.jsx)(V,{})})})})}),document.getElementById("root"))}},[[84,4,6]]]);
//# sourceMappingURL=main.77175fe0.chunk.js.map